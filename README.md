๐ Express.js + Passport + MongoDB Atlas
ะฆะตะน ะฟัะพัะบั ัะตะฐะปัะทัั:
- ะะพะบะฐะปัะฝั ะฐะฒัะพัะธะทะฐััั ัะตัะตะท Passport.js
- ะะฑะตัะตะถะตะฝะฝั ัะตััะน ั cookies
- ะะฐัะธัะตะฝะธะน ะผะฐััััั /protected
- ะะตัะตะผะธะบะฐั ัะตะผะธ (light/dark) ะท cookie-ะทะฑะตัะตะถะตะฝะฝัะผ
- MongoDB Atlas ะดะปั ะทะฑะตััะณะฐะฝะฝั ัะฐ ัะธัะฐะฝะฝั ะดะฐะฝะธั
- Pug-ัะฐะฑะปะพะฝะธ ะดะปั ัะตะฝะดะตัะธะฝะณั ััะพััะฝะพะบ
- ะกัััะบัััะพะฒะฐะฝั ะฐััััะตะบัััั ะดะปั ะผะฐัััะฐะฑัะฒะฐะฝะฝั

โ๏ธ ะขะตัะฝะพะปะพะณัั
- Node.js, Express.js
- Passport.js (passport-local)
- express-session, cookie-parser
- bcrypt โ ัะตััะฒะฐะฝะฝั ะฟะฐัะพะปัะฒ
- MongoDB Atlas + Mongoose
- Pug โ ัะฐะฑะปะพะฝะธ
- dotenv โ ะทะผัะฝะฝั ัะตัะตะดะพะฒะธัะฐ

๐ ะะฐะฟััะบ
npm install
npm run dev


ะกัะฒะพัััั .env ั ะบะพัะตะฝั ะฟัะพัะบัั:

SESSION_SECRET=your_secret_key
JWT_SECRET=your_jwt_secret_key
MONGO_URI=mongodb+srv://<username>:<password>@cluster0.mongodb.net/<dbname>?retryWrites=true&w=majority

๎ท๎ท

๐ ะกัััะบัััะฐ
express-project/
โโโ app.js
โโโ config/
โ   โโโ db.js               # ะัะดะบะปััะตะฝะฝั ะดะพ MongoDB Atlas
โ   โโโ passport.js         # ะะพะฝััะณััะฐััั Passport
โโโ middleware/
โ   โโโ auth.js             # JWT middleware (ะพะฟััะพะฝะฐะปัะฝะพ)
โ   โโโ ensureAuthenticated.js  # Passport middleware
โโโ models/
โ   โโโ User.js             # ะะพะดะตะปั ะบะพัะธัััะฒะฐัะฐ
โ   โโโ Post.js             # ะะพะดะตะปั ะฟะพัััะฒ (MongoDB)
โโโ routes/
โ   โโโ auth.js             # ะะตััััะฐััั, ะฒััะด, ะฒะธััะด
โ   โโโ index.js            # ะะพะปะพะฒะฝะฐ ััะพััะฝะบะฐ + ัะธัะฐะฝะฝั ะฟะพัััะฒ
โ   โโโ theme.js            # ะะตัะตะผะธะบะฐั ัะตะผะธ
โโโ views/
โ   โโโ index.pug
โ   โโโ login.pug
โ   โโโ register.pug
โ   โโโ protected.pug
โ   โโโ layouts/
โ       โโโ layout.pug
โโโ public/
โ   โโโ js/
โ   โ   โโโ theme.js
โ   โโโ css/
โ   โ   โโโ styles.css
โ   โโโ favicon.ico
โโโ .env
โโโ README.md



๐ ะะฒัะพัะธะทะฐััั
- ะะตััััะฐััั: POST /auth/register
- ะััะด: POST /auth/login
- ะะธััะด: GET /auth/logout
- ะกััะฐัะตะณัั: passport-local (email + ะฟะฐัะพะปั)
- ะะฐัะพะปั ัะตััััััั ัะตัะตะท bcrypt
- ะััะปั ะฒัะพะดั ะบะพัะธัััะฒะฐั ะดะพัััะฟะฝะธะน ัะบ req.user

๐ง ะกะตััั
- ะะฐะปะฐััะพะฒะฐะฝะพ express-session
- ะกะตััั ะทะฑะตััะณะฐััััั ั cookie (httpOnly, secure)
- Passport ัะตััะฐะปัะทัั/ะดะตัะตััะฐะปัะทัั ะบะพัะธัััะฒะฐัะฐ
- ะะพัััะฟ ะดะพ req.user ะฟััะปั ะฒัะพะดั

๐ก๏ธ ะะฐัะธัะตะฝะธะน ะผะฐััััั
- GET /protected
- Middleware ensureAuthenticated ะฟะตัะตะฒัััั ัะตััั
- ะฏะบัะพ ะบะพัะธัััะฒะฐั ะฝะต ะฐะฒัะพัะธะทะพะฒะฐะฝะธะน โ ัะตะดะธัะตะบั ะฝะฐ /auth/login

๐จ ะะตัะตะผะธะบะฐั ัะตะผะธ
- ะะฝะพะฟะบะธ "ะกะฒะตัะปะฐั" / "ะขัะผะฝะฐั"
- JS (theme.js) ะฝะฐะดัะธะปะฐั POST-ะทะฐะฟะธั ะฝะฐ /theme
- ะะตะบะตะฝะด ะทะฑะตััะณะฐั ัะตะผั ะฒ cookie
- ะัะธ ะทะฐะฒะฐะฝัะฐะถะตะฝะฝั ััะพััะฝะบะธ ัะตะผะฐ ะทะฐััะพัะพะฒัััััั ะฐะฒัะพะผะฐัะธัะฝะพ
- ะกัะธะปั ะทะผัะฝัััััั ัะตัะตะท ะบะปะฐั body.light / body.dark

๐๏ธ MongoDB Atlas
- ะัะดะบะปััะตะฝะพ ัะตัะตะท mongoose.connect(process.env.MONGO_URI)
- ะะพะดะตะปั Post ะทะฑะตััะณะฐั ะดะพะบัะผะตะฝัะธ ะท title, content, createdAt
- ะะฐะฝั ัะธัะฐััััั ัะตัะตะท Post.find() ั ะฟะตัะตะดะฐััััั ะฒ index.pug

๐ผ๏ธ Pug-ัะฐะฑะปะพะฝะธ
- layout.pug โ ะฑะฐะทะพะฒะธะน ะบะฐัะบะฐั
- index.pug โ ะณะพะปะพะฒะฝะฐ ััะพััะฝะบะฐ ะท ัะตะผะพั ัะฐ ะฟะพััะฐะผะธ
- login.pug / register.pug โ ัะพัะผะธ ะฐะฒัะพัะธะทะฐััั
- protected.pug โ ะทะฐัะธัะตะฝะฐ ะทะพะฝะฐ

